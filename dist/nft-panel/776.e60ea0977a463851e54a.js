"use strict";(self.webpackChunknft_panel=self.webpackChunknft_panel||[]).push([[776],{6658:(Z,C,e)=>{e.d(C,{y:()=>O});var F=e(4294),i=e(9922),y=e(2352),v=e(7716),M=e(1841),x=e(9344);let O=(()=>{class h extends y.s{constructor(l,p){super(l),this.http=l,this.toastrService=p,this.maxWidth=73,this.maxHeight=64}uploadMedia(l,p){return this.postMedia(`/media-upload/mediaFiles/${l}`,p).pipe((0,F.q)(1),(0,i.b)(s=>{var o,g;s.hasErrors()&&this.toastrService.error(null===(g=null===(o=null==s?void 0:s.errors[0])||void 0===o?void 0:o.error)||void 0===g?void 0:g.message)}))}convertToImg(l,p){return new Promise(s=>{const o=document.createElement("canvas"),g=o.getContext("2d"),a=new Image;a.src=l,a.onload=()=>{o.width=72,o.height=64,g.drawImage(a,0,0,a.width,a.height,0,0,72,64),s(this.dataURLtoFile(o.toDataURL(),p))}})}dataURLtoFile(l,p){const s=l.split(","),o=s[0].match(/:(.*?);/)[1],g=atob(s[1]);let a=g.length;const d=new Uint8Array(a);for(;a--;)d[a]=g.charCodeAt(a);return new File([d],p,{type:o})}compressImage(l){return new Promise((p,s)=>{const o=document.createElement("canvas"),g=o.getContext("2d"),a=new Image;a.src=URL.createObjectURL(l),a.onload=()=>{const d=this.calculateAspectRatioFit(null==a?void 0:a.width,null==a?void 0:a.height);o.width=d.width,o.height=d.height,g.drawImage(a,0,0,a.width,a.height,0,0,d.width,d.height),p(this.dataURLtoFile(o.toDataURL(),"thumbnail.jpg"))}})}calculateAspectRatioFit(l,p){const s=Math.min(this.maxWidth/l,this.maxHeight/p);return{width:l*s,height:p*s}}}return h.\u0275fac=function(l){return new(l||h)(v.LFG(M.eN),v.LFG(x._W))},h.\u0275prov=v.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},5776:(Z,C,e)=>{e.r(C),e.d(C,{CreateGroupDialogModule:()=>R});var F=e(8583),i=e(3679),y=e(6237),v=e(9344),M=e(4819),x=e(3291),O=e(6889),h=e(1964),P=e(2687),l=e(5755),p=e(4294),s=e(7580),o=e(7716),g=e(7423),a=e(6989),d=e(1659),_=e(6658),T=e(1841),I=e(9866),U=e(9309),w=e(4228);function A(r,m){1&r&&(o.TgZ(0,"p",18),o._uU(1,"please enter name"),o.qZA())}function b(r,m){if(1&r&&(o.TgZ(0,"p",18),o._uU(1),o.qZA()),2&r){const n=o.oxw();o.xp6(1),o.hij("name should be greater than or equal to ",null==n.groupForm.controls.name.errors?null:n.groupForm.controls.name.errors.minlength.requiredLength," character ")}}function G(r,m){1&r&&(o.TgZ(0,"p",18),o._uU(1,"please enter fee"),o.qZA())}function D(r,m){if(1&r&&(o.TgZ(0,"p",18),o._uU(1),o.qZA()),2&r){const n=o.oxw();o.xp6(1),o.hij("fee must be greater then or equal to ",null==n.groupForm.controls.royaltyFee.errors||null==n.groupForm.controls.royaltyFee.errors.min?null:n.groupForm.controls.royaltyFee.errors.min.min," ")}}function L(r,m){if(1&r&&(o.TgZ(0,"p",18),o._uU(1),o.qZA()),2&r){const n=o.oxw();o.xp6(1),o.hij("fee must be less then or equal to ",null==n.groupForm.controls.royaltyFee.errors||null==n.groupForm.controls.royaltyFee.errors.max?null:n.groupForm.controls.royaltyFee.errors.max.max," ")}}function E(r,m){1&r&&(o.TgZ(0,"p",18),o._uU(1,"please enter description"),o.qZA())}function N(r,m){if(1&r&&(o.TgZ(0,"p",18),o._uU(1),o.qZA()),2&r){const n=o.oxw();o.xp6(1),o.hij("description should be greater than or equal to ",null==n.groupForm.controls.description.errors?null:n.groupForm.controls.description.errors.minlength.requiredLength," character ")}}let S=(()=>{class r{constructor(n,t,u,c,f,Y,J,j,B,W){this.authService=n,this.customDialogService=t,this.formBuilder=u,this.groupService=c,this.mediaService=f,this.http=Y,this.toastr=J,this.cf=j,this.spinner=B,this.routeService=W,this.destroy$=new O.x,this.imgFormData=new FormData,this.groups$=this.groupService.groups$,this.limit=6,this.groupForm=this.formBuilder.group({name:new i.NI("",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(7)]),description:new i.NI("",[i.kI.required,i.kI.minLength(15),i.kI.maxLength(600)]),royaltyFee:new i.NI("",[i.kI.required,i.kI.min(1),i.kI.max(999999)]),file:new i.NI("")}),this.page=1,this._isLoading=!1,this.routeService.clubName$.pipe((0,P.x)(),(0,l.R)(this.destroy$)).subscribe(q=>{this.clubName=q,this.getGroup()})}getGroup(){this._isLoading||this.groupService.getAllGroupsByClub(this.clubName,this.page,{limit:this.limit})}addGroup(){this.spinner.show("main");const n=document.getElementById("group-img");x.YM(n,{canvasWidth:186,canvasHeight:162,width:186,height:162,quality:1,pixelRatio:1,skipAutoScale:!1}).then(t=>{this.groupForm.patchValue({file:this.mediaService.dataURLtoFile(t,this.groupForm.controls.name.value+".png")}),this.imgFormData.append("file",this.groupForm.get("file").value),this.mediaService.uploadMedia("group",this.imgFormData).pipe((0,p.q)(1),(0,s.z)(u=>{var c;if(u.hasErrors())return(0,h.of)(null);{const f={name:this.groupForm.controls.name.value,royaltyFee:this.groupForm.controls.royaltyFee.value,description:this.groupForm.controls.description.value,appPackageId:null===(c=this.authService.loggedInUser)||void 0===c?void 0:c.appPackageId,coverImageUrl:u.data.url};return this.groupService.addGroups(f)}})).subscribe(u=>{var c,f;this.spinner.hide("main"),null===u||u.hasErrors()?(this.imgFormData=new FormData,this.toastr.error(null===(f=null===(c=u.errors[0])||void 0===c?void 0:c.error)||void 0===f?void 0:f.message,"Error!")):(this.cf.detectChanges(),this.toastr.success("New group successfully added.","Success!"),this.getGroup(),this.close())})}).catch(t=>{this.toastr.warning(t,"Error!")})}numberOnly(n){const t=n.which?n.which:n.keyCode;return!(t>31&&(t<48||t>57))}close(){this.customDialogService.closeDialogs()}}return r.\u0275fac=function(n){return new(n||r)(o.Y36(g.e),o.Y36(a.W),o.Y36(i.qu),o.Y36(d.l),o.Y36(_.y),o.Y36(T.eN),o.Y36(v._W),o.Y36(o.sBO),o.Y36(I.t2),o.Y36(U.M))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-create-group"]],decls:33,vars:10,consts:[[1,"group-model"],[1,"flex","justify-end"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],[2,"position","absolute","right","0","top","0"],["id","group-img",2,"position","relative","top","0","width","182px","text-align","center","right","0","height","162px","overflow","hidden"],[2,"background-color","#D99F3A","transform","rotate(41.3deg)","top","21%","width","300px","position","absolute","right","-50%","height","52px","font-weight","400","font-size","32px"],[1,"group-form",3,"formGroup"],["for","name"],["appTrim","","type","text","formControlName","name","maxlength","7"],["class","error-msg error",4,"ngIf"],["for","royaltyFee"],["type","text","name","royaltyFee","formControlName","royaltyFee","maxlength","6",3,"keypress"],["for","description",1,"floating-label"],["appTrim","","type","text","formControlName","description","maxlength","600"],[1,"icon","description-hide-icon"],[1,"primary-btn",3,"disabled","click"],[1,"error-msg","error"]],template:function(n,t){1&n&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"button",2),o.NdJ("click",function(){return t.close()}),o.O4$(),o.TgZ(3,"svg",3),o._UZ(4,"path",4),o.qZA(),o.qZA(),o.qZA(),o.kcU(),o.TgZ(5,"h1"),o.TgZ(6,"span"),o._uU(7,"Cre"),o.qZA(),o._uU(8,"ate Group"),o.qZA(),o.TgZ(9,"div",5),o.TgZ(10,"div",6),o.TgZ(11,"div",7),o._uU(12),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"form",8),o.TgZ(14,"label",9),o._uU(15,"Name"),o.qZA(),o._UZ(16,"input",10),o.YNc(17,A,2,0,"p",11),o.YNc(18,b,2,1,"p",11),o.TgZ(19,"label",12),o._uU(20,"Royalty Fee"),o.qZA(),o.TgZ(21,"input",13),o.NdJ("keypress",function(c){return t.numberOnly(c)}),o.qZA(),o.YNc(22,G,2,0,"p",11),o.YNc(23,D,2,1,"p",11),o.YNc(24,L,2,1,"p",11),o.TgZ(25,"label",14),o._uU(26,"Description"),o.qZA(),o._UZ(27,"textarea",15),o._UZ(28,"span",16),o.YNc(29,E,2,0,"p",11),o.YNc(30,N,2,1,"p",11),o.TgZ(31,"button",17),o.NdJ("click",function(){return t.addGroup()}),o._uU(32," Add Group "),o.qZA(),o.qZA(),o.qZA()),2&n&&(o.xp6(12),o.hij(" ",t.groupForm.controls.name.value," "),o.xp6(1),o.Q6J("formGroup",t.groupForm),o.xp6(4),o.Q6J("ngIf",t.groupForm.controls.name.touched&&(null==t.groupForm.controls.name.errors?null:t.groupForm.controls.name.errors.required)),o.xp6(1),o.Q6J("ngIf",t.groupForm.controls.name.touched&&(null==t.groupForm.controls.name.errors?null:t.groupForm.controls.name.errors.minlength)),o.xp6(4),o.Q6J("ngIf",t.groupForm.controls.royaltyFee.touched&&(null==t.groupForm.controls.royaltyFee.errors?null:t.groupForm.controls.royaltyFee.errors.required)),o.xp6(1),o.Q6J("ngIf",t.groupForm.controls.royaltyFee.touched&&(null==t.groupForm.controls.royaltyFee.errors?null:t.groupForm.controls.royaltyFee.errors.min)),o.xp6(1),o.Q6J("ngIf",t.groupForm.controls.royaltyFee.touched&&(null==t.groupForm.controls.royaltyFee.errors?null:t.groupForm.controls.royaltyFee.errors.max)),o.xp6(5),o.Q6J("ngIf",t.groupForm.controls.description.touched&&(null==t.groupForm.controls.description.errors?null:t.groupForm.controls.description.errors.required)),o.xp6(1),o.Q6J("ngIf",t.groupForm.controls.name.touched&&(null==t.groupForm.controls.description.errors?null:t.groupForm.controls.description.errors.minlength)),o.xp6(1),o.Q6J("disabled",!t.groupForm.valid))},directives:[i._Y,i.JL,i.sg,i.Fj,w.$,i.JJ,i.u,i.nD,F.O5],styles:[".create-group-dialog-overlay{height:auto;min-height:584px;max-width:580px!important}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.group-model[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-left:0;padding-right:0}@media (min-width: 640px){.group-model[_ngcontent-%COMP%]{padding-left:4rem;padding-right:4rem}}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:0px;right:0px;z-index:10;margin:.875rem;border-radius:9999px;--tw-bg-opacity: 1;background-color:rgba(255,255,255,var(--tw-bg-opacity));opacity:.5}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{opacity:.7}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{padding:1px}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#132356}.group-model[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:1.5rem;object-fit:scale-down}@media (min-width: 640px){.group-model[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:1.5rem}}@media (min-width: 768px){.group-model[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:3rem}}.group-model[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:410px;height:90px}.group-model[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem;align-self:flex-start;font-size:1.875rem;line-height:2.25rem;font-weight:400}.group-model[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-bottom:4px;border-bottom:2px solid #75F16D}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem;font-size:1.125rem;line-height:1.75rem}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:3.5rem;padding-left:1.25rem;padding-right:1.25rem}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:1.25rem;height:156px}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem;height:2.75rem;width:10rem;align-self:center}"]}),r})(),R=(()=>{class r{static getCreateGroupComponent(){return S}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[[F.ez,i.u5,i.UX,y.PW,M.n,v.Rh.forRoot({positionClass:"toast-top-right"})]]}),r})()}}]);
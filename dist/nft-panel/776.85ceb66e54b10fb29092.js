"use strict";(self.webpackChunknft_panel=self.webpackChunknft_panel||[]).push([[776],{6658:(A,y,o)=>{o.d(y,{y:()=>_});var M=o(8583),a=o(4294),P=o(9922),x=o(2352),C=o(7716),w=o(1841),Z=o(9344);let _=(()=>{class v extends x.s{constructor(s,g,t){super(g),this.document=s,this.http=g,this.toastrService=t,this.maxWidth=538,this.maxHeight=529}uploadMedia(s,g){return this.postMedia(`/media-upload/mediaFiles/${s}`,g).pipe((0,a.q)(1),(0,P.b)(t=>{var l,m;t.hasErrors()&&this.toastrService.error(null===(m=null===(l=null==t?void 0:t.errors[0])||void 0===l?void 0:l.error)||void 0===m?void 0:m.message)}))}convertToImg(s,g){return new Promise(t=>{const l=document.createElement("canvas"),m=l.getContext("2d"),i=new Image;i.src=s,i.onload=()=>{l.width=72,l.height=64,m.drawImage(i,0,0,i.width,i.height,0,0,72,64),t(this.dataURLtoFile(l.toDataURL(),g))}})}dataURLtoFile(s,g){const t=s.split(","),l=t[0].match(/:(.*?);/)[1],m=atob(t[1]);let i=m.length;const u=new Uint8Array(i);for(;i--;)u[i]=m.charCodeAt(i);return new File([u],g,{type:l})}compressImage(s){return new Promise((g,t)=>{const l=document.createElement("canvas"),m=l.getContext("2d"),i=new Image;i.src=URL.createObjectURL(s),i.onload=()=>{const u=this.calculateAspectRatioFit(null==i?void 0:i.width,null==i?void 0:i.height);l.width=u.width,l.height=u.height,m.drawImage(i,0,0,i.width,i.height,0,0,u.width,u.height),g(this.dataURLtoFile(l.toDataURL(),"thumbnail.jpg"))}})}calculateAspectRatioFit(s,g){const t=Math.min(this.maxWidth/s,this.maxHeight/g);return{width:s*t,height:g*t}}generateThumbnail(s,g){const t=this.document.createElement("video"),l=this.document.createElement("canvas"),m=document.createElement("canvas"),i=l.getContext("2d"),u=m.getContext("2d");return new Promise((T,O)=>{l.addEventListener("error",O),t.addEventListener("error",O),t.addEventListener("loadedmetadata",()=>{t.currentTime=Math.round(t.duration/2),i.drawImage(t,0,0,t.videoWidth,t.videoHeight)}),t.addEventListener("canplay",U=>{l.width=t.videoWidth,l.height=t.videoHeight,l.getContext("2d").drawImage(t,0,0,t.videoWidth,t.videoHeight);var p=new Image;p.src=l.toDataURL(),p.onload=()=>{let F=this.calculateAspectRatioFit(null==p?void 0:p.width,null==p?void 0:p.height);m.width=F.width,m.height=F.height,u.drawImage(p,0,0,p.width,p.height,0,0,F.width,F.height),T(this.dataURLtoFile(m.toDataURL(),g+".jpg"))}}),s.type&&t.setAttribute("type",s.type),t.preload="auto",t.src=window.URL.createObjectURL(s),t.load()})}}return v.\u0275fac=function(s){return new(s||v)(C.LFG(M.K0),C.LFG(w.eN),C.LFG(Z._W))},v.\u0275prov=C.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},5776:(A,y,o)=>{o.r(y),o.d(y,{CreateGroupDialogModule:()=>S});var M=o(8583),a=o(3679),P=o(6237),x=o(9344),C=o(4819),w=o(3291),Z=o(6889),_=o(1964),v=o(2687),I=o(5755),s=o(4294),g=o(7580),t=o(7716),l=o(7423),m=o(6989),i=o(1659),u=o(6658),T=o(1841),O=o(9866),U=o(9309),p=o(4228);function F(r,c){1&r&&(t.TgZ(0,"p",18),t._uU(1,"please enter name"),t.qZA())}function L(r,c){if(1&r&&(t.TgZ(0,"p",18),t._uU(1),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.hij("name should be greater than or equal to ",null==n.groupForm.controls.name.errors?null:n.groupForm.controls.name.errors.minlength.requiredLength," character ")}}function b(r,c){1&r&&(t.TgZ(0,"p",18),t._uU(1,"please enter fee"),t.qZA())}function E(r,c){if(1&r&&(t.TgZ(0,"p",18),t._uU(1),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.hij("fee must be greater then or equal to ",null==n.groupForm.controls.royaltyFee.errors||null==n.groupForm.controls.royaltyFee.errors.min?null:n.groupForm.controls.royaltyFee.errors.min.min," ")}}function D(r,c){if(1&r&&(t.TgZ(0,"p",18),t._uU(1),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.hij("fee must be less then or equal to ",null==n.groupForm.controls.royaltyFee.errors||null==n.groupForm.controls.royaltyFee.errors.max?null:n.groupForm.controls.royaltyFee.errors.max.max," ")}}function G(r,c){1&r&&(t.TgZ(0,"p",18),t._uU(1,"please enter description"),t.qZA())}function R(r,c){if(1&r&&(t.TgZ(0,"p",18),t._uU(1),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.hij("description should be greater than or equal to ",null==n.groupForm.controls.description.errors?null:n.groupForm.controls.description.errors.minlength.requiredLength," character ")}}let N=(()=>{class r{constructor(n,e,d,h,f,Y,j,J,W,B){this.authService=n,this.customDialogService=e,this.formBuilder=d,this.groupService=h,this.mediaService=f,this.http=Y,this.toastr=j,this.cf=J,this.spinner=W,this.routeService=B,this.destroy$=new Z.x,this.imgFormData=new FormData,this.groups$=this.groupService.groups$,this.limit=6,this.groupForm=this.formBuilder.group({name:new a.NI("",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(7)]),description:new a.NI("",[a.kI.required,a.kI.minLength(15),a.kI.maxLength(600)]),royaltyFee:new a.NI("",[a.kI.required,a.kI.min(1),a.kI.max(20)]),file:new a.NI("")}),this.page=1,this._isLoading=!1,this.routeService.clubName$.pipe((0,v.x)(),(0,I.R)(this.destroy$)).subscribe(z=>{this.clubName=z,this.getGroup()})}getGroup(){this._isLoading||this.groupService.getAllGroupsByClub(this.clubName,this.page,{limit:this.limit})}addGroup(){this.spinner.show("main");const n=document.getElementById("group-img");w.YM(n,{canvasWidth:186,canvasHeight:162,width:186,height:162,quality:1,pixelRatio:1,skipAutoScale:!1}).then(e=>{this.groupForm.patchValue({file:this.mediaService.dataURLtoFile(e,this.groupForm.controls.name.value+".png")}),this.imgFormData.append("file",this.groupForm.get("file").value),this.mediaService.uploadMedia("group",this.imgFormData).pipe((0,s.q)(1),(0,g.z)(d=>{var h;if(d.hasErrors())return(0,_.of)(null);{const f={name:this.groupForm.controls.name.value,royaltyFee:this.groupForm.controls.royaltyFee.value,description:this.groupForm.controls.description.value,appPackageId:null===(h=this.authService.loggedInUser)||void 0===h?void 0:h.appPackageId,coverImageUrl:d.data.url};return this.groupService.addGroups(f)}})).subscribe(d=>{var h,f;this.spinner.hide("main"),null===d||d.hasErrors()?(this.imgFormData=new FormData,this.toastr.error(null===(f=null===(h=d.errors[0])||void 0===h?void 0:h.error)||void 0===f?void 0:f.message,"Error!")):(this.cf.detectChanges(),this.toastr.success("New group successfully added.","Success!"),this.getGroup(),this.close())})}).catch(e=>{this.toastr.warning(e,"Error!")})}numberOnly(n){const e=n.which?n.which:n.keyCode;return!(e>31&&(e<48||e>57))}close(){this.customDialogService.closeDialogs()}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(l.e),t.Y36(m.W),t.Y36(a.qu),t.Y36(i.l),t.Y36(u.y),t.Y36(T.eN),t.Y36(x._W),t.Y36(t.sBO),t.Y36(O.t2),t.Y36(U.M))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-create-group"]],decls:33,vars:10,consts:[[1,"group-model"],[1,"flex","justify-end"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],[2,"position","absolute","right","0","top","0"],["id","group-img",2,"position","relative","top","0","width","182px","text-align","center","right","0","height","162px","overflow","hidden"],[2,"background-color","#D99F3A","transform","rotate(41.3deg)","top","21%","width","300px","position","absolute","right","-50%","height","52px","font-weight","400","font-size","32px"],[1,"group-form",3,"formGroup"],["for","name"],["appTrim","","type","text","formControlName","name","maxlength","7"],["class","error-msg error",4,"ngIf"],["for","royaltyFee"],["type","text","name","royaltyFee","formControlName","royaltyFee","maxlength","2",3,"keypress"],["for","description",1,"floating-label"],["appTrim","","type","text","formControlName","description","maxlength","600"],[1,"icon","description-hide-icon"],[1,"primary-btn",3,"disabled","click"],[1,"error-msg","error"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return e.close()}),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4),t.qZA(),t.qZA(),t.qZA(),t.kcU(),t.TgZ(5,"h1"),t.TgZ(6,"span"),t._uU(7,"Cre"),t.qZA(),t._uU(8,"ate Group"),t.qZA(),t.TgZ(9,"div",5),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t._uU(12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"form",8),t.TgZ(14,"label",9),t._uU(15,"Name"),t.qZA(),t._UZ(16,"input",10),t.YNc(17,F,2,0,"p",11),t.YNc(18,L,2,1,"p",11),t.TgZ(19,"label",12),t._uU(20,"Royalty Fee (%)"),t.qZA(),t.TgZ(21,"input",13),t.NdJ("keypress",function(h){return e.numberOnly(h)}),t.qZA(),t.YNc(22,b,2,0,"p",11),t.YNc(23,E,2,1,"p",11),t.YNc(24,D,2,1,"p",11),t.TgZ(25,"label",14),t._uU(26,"Description"),t.qZA(),t._UZ(27,"textarea",15),t._UZ(28,"span",16),t.YNc(29,G,2,0,"p",11),t.YNc(30,R,2,1,"p",11),t.TgZ(31,"button",17),t.NdJ("click",function(){return e.addGroup()}),t._uU(32," Add Group "),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(12),t.hij(" ",e.groupForm.controls.name.value," "),t.xp6(1),t.Q6J("formGroup",e.groupForm),t.xp6(4),t.Q6J("ngIf",e.groupForm.controls.name.touched&&(null==e.groupForm.controls.name.errors?null:e.groupForm.controls.name.errors.required)),t.xp6(1),t.Q6J("ngIf",e.groupForm.controls.name.touched&&(null==e.groupForm.controls.name.errors?null:e.groupForm.controls.name.errors.minlength)),t.xp6(4),t.Q6J("ngIf",e.groupForm.controls.royaltyFee.touched&&(null==e.groupForm.controls.royaltyFee.errors?null:e.groupForm.controls.royaltyFee.errors.required)),t.xp6(1),t.Q6J("ngIf",e.groupForm.controls.royaltyFee.touched&&(null==e.groupForm.controls.royaltyFee.errors?null:e.groupForm.controls.royaltyFee.errors.min)),t.xp6(1),t.Q6J("ngIf",e.groupForm.controls.royaltyFee.touched&&(null==e.groupForm.controls.royaltyFee.errors?null:e.groupForm.controls.royaltyFee.errors.max)),t.xp6(5),t.Q6J("ngIf",e.groupForm.controls.description.touched&&(null==e.groupForm.controls.description.errors?null:e.groupForm.controls.description.errors.required)),t.xp6(1),t.Q6J("ngIf",e.groupForm.controls.name.touched&&(null==e.groupForm.controls.description.errors?null:e.groupForm.controls.description.errors.minlength)),t.xp6(1),t.Q6J("disabled",!e.groupForm.valid))},directives:[a._Y,a.JL,a.sg,a.Fj,p.$,a.JJ,a.u,a.nD,M.O5],styles:[".create-group-dialog-overlay{height:auto;min-height:584px;max-width:580px!important}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.group-model[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-left:0;padding-right:0}@media (min-width: 640px){.group-model[_ngcontent-%COMP%]{padding-left:4rem;padding-right:4rem}}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:0px;right:0px;z-index:10;margin:.875rem;border-radius:9999px;--tw-bg-opacity: 1;background-color:rgba(255,255,255,var(--tw-bg-opacity));opacity:.5}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{opacity:.7}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{padding:1px}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#132356}.group-model[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:1.5rem;object-fit:scale-down}@media (min-width: 640px){.group-model[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:1.5rem}}@media (min-width: 768px){.group-model[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:3rem}}.group-model[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:410px;height:90px}.group-model[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem;align-self:flex-start;font-size:1.875rem;line-height:2.25rem;font-weight:400}.group-model[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-bottom:4px;border-bottom:2px solid #75F16D}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem;font-size:1.125rem;line-height:1.75rem}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:3.5rem;padding-left:1.25rem;padding-right:1.25rem}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:1.25rem;height:156px}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem;height:2.75rem;width:10rem;align-self:center}"]}),r})(),S=(()=>{class r{static getCreateGroupComponent(){return N}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[M.ez,a.u5,a.UX,P.PW,C.n,x.Rh.forRoot({positionClass:"toast-top-right"})]]}),r})()}}]);
"use strict";(self.webpackChunknft_panel=self.webpackChunknft_panel||[]).push([[776],{7580:(I,x,o)=>{o.d(x,{z:()=>E});var C=o(5207),i=o(8476),v=o(424),u=o(5076);function E(f,D){return D?function(m){return m.pipe(E(function(c,n){return(0,i.Xf)(f(c,n)).pipe((0,C.U)(function(a,t){return D(c,a,n,t)}))}))}:(0,v.e)(function(m,c){var n=0,a=null,t=!1;m.subscribe(new u.Q(c,function(e){a||(a=new u.Q(c,void 0,function(){a=null,t&&c.complete()}),(0,i.Xf)(f(e,n++)).subscribe(a))},function(){t=!0,!a&&c.complete()}))})}},1659:(I,x,o)=>{o.d(x,{l:()=>c});var C=o(5094),i=o(4294),v=o(9922),u=o(2340),E=o(2352),f=o(7716),D=o(1841),m=o(9344);let c=(()=>{class n extends E.s{constructor(t,e){super(t),this.http=t,this.toastrService=e,this._totalCount$=new C.X(0),this.totalCount$=this._totalCount$.asObservable(),this._groups$=new C.X([]),this.groups$=this._groups$.asObservable(),this.limit=u.N.limit}getAllGroupsByClub(t,e,s,r){e--,this.limit=s,this.get("/group/getAllGroupsByAppPackageId",{clubName:t,offset:e?(this.limit||u.N.limit)*e:0,limit:this.limit||u.N.limit,name:r||""}).pipe((0,i.q)(1),(0,v.b)(h=>{var _,M,F;h.hasErrors()?this.toastrService.error(null===(F=null===(M=null==h?void 0:h.errors[0])||void 0===M?void 0:M.error)||void 0===F?void 0:F.message):(this._totalCount$.next(h.data.totalCount),this._groups$.next(null===(_=h.data)||void 0===_?void 0:_.data))})).subscribe()}getUsersGroups(t,e,s,r){return this.limit=r,this.get("/group/getUsersGroupsByAppPackageId/"+e,{clubName:t,offset:s?(this.limit||u.N.limit)*s:0,limit:this.limit||u.N.limit}).pipe((0,i.q)(1),(0,v.b)(h=>{var _,M;h.hasErrors()&&this.toastrService.error(null===(M=null===(_=null==h?void 0:h.errors[0])||void 0===_?void 0:_.error)||void 0===M?void 0:M.message)}))}addGroups(t){return this.post("/group/addGroup",t).pipe((0,v.b)(e=>{var s,r;if(e.hasErrors())this.toastrService.error(null===(r=null===(s=null==e?void 0:e.errors[0])||void 0===s?void 0:s.error)||void 0===r?void 0:r.message);else if(this._totalCount$.next(this._totalCount$.getValue()+1),this._groups$.getValue().length<this.limit){const d=this._groups$.getValue();this._groups$.next([e.data,...d])}}))}deleteGroups(t){return this.get(`/group/deleteGroupById/${t}`).pipe((0,i.q)(1),(0,v.b)(e=>{var s,r;e.hasErrors()&&this.toastrService.error(null===(r=null===(s=null==e?void 0:e.errors[0])||void 0===s?void 0:s.error)||void 0===r?void 0:r.message)}))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(D.eN),f.LFG(m._W))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},6658:(I,x,o)=>{o.d(x,{y:()=>D});var C=o(4294),i=o(9922),v=o(2352),u=o(7716),E=o(1841),f=o(9344);let D=(()=>{class m extends v.s{constructor(n,a){super(n),this.http=n,this.toastrService=a,this.maxWidth=73,this.maxHeight=64}uploadMedia(n,a){return this.postMedia(`/media-upload/mediaFiles/${n}`,a).pipe((0,C.q)(1),(0,i.b)(t=>{var e,s;t.hasErrors()&&this.toastrService.error(null===(s=null===(e=null==t?void 0:t.errors[0])||void 0===e?void 0:e.error)||void 0===s?void 0:s.message)}))}convertToImg(n,a){return console.log("si:",n),console.log("fi:",a),new Promise(t=>{const e=document.createElement("canvas"),s=e.getContext("2d"),r=new Image;r.src=n,console.log("img:",r),r.onload=()=>{e.width=72,e.height=64,s.drawImage(r,0,0,r.width,r.height,0,0,72,64),t(this.dataURLtoFile(e.toDataURL(),a))}})}dataURLtoFile(n,a){const t=n.split(","),e=t[0].match(/:(.*?);/)[1],s=atob(t[1]);let r=s.length;const d=new Uint8Array(r);for(;r--;)d[r]=s.charCodeAt(r);return new File([d],a,{type:e})}compressImage(n){return new Promise((a,t)=>{const e=document.createElement("canvas"),s=e.getContext("2d"),r=new Image;r.src=URL.createObjectURL(n),r.onload=()=>{const d=this.calculateAspectRatioFit(null==r?void 0:r.width,null==r?void 0:r.height);e.width=d.width,e.height=d.height,s.drawImage(r,0,0,r.width,r.height,0,0,d.width,d.height),a(this.dataURLtoFile(e.toDataURL(),"thumbnail.jpg"))}})}calculateAspectRatioFit(n,a){const t=Math.min(this.maxWidth/n,this.maxHeight/a);return{width:n*t,height:a*t}}}return m.\u0275fac=function(n){return new(n||m)(u.LFG(E.eN),u.LFG(f._W))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},5776:(I,x,o)=>{o.r(x),o.d(x,{CreateGroupDialogModule:()=>Z});var C=o(8583),i=o(3679),v=o(6237),u=o(9344),E=o(3291),f=o(6889),D=o(1964),m=o(2687),c=o(5755),n=o(4294),a=o(7580),t=o(7716),e=o(7423),s=o(4909),r=o(1659),d=o(6658),h=o(1841),_=o(9866),M=o(9309);function F(g,U){1&g&&(t.TgZ(0,"p",16),t._uU(1,"please enter name"),t.qZA())}function T(g,U){if(1&g&&(t.TgZ(0,"p",16),t._uU(1),t.qZA()),2&g){const p=t.oxw();t.xp6(1),t.hij("name should be greater than or equal to ",null==p.groupForm.controls.name.errors?null:p.groupForm.controls.name.errors.minlength.requiredLength," character ")}}function L(g,U){1&g&&(t.TgZ(0,"p",16),t._uU(1,"please enter description"),t.qZA())}function G(g,U){if(1&g&&(t.TgZ(0,"p",16),t._uU(1),t.qZA()),2&g){const p=t.oxw();t.xp6(1),t.hij("description should be greater than or equal to ",null==p.groupForm.controls.description.errors?null:p.groupForm.controls.description.errors.minlength.requiredLength," character ")}}let b=(()=>{class g{constructor(p,l,O,P,A,y,R,S,B,w){this.authService=p,this.customDialogService=l,this.formBuilder=O,this.groupService=P,this.mediaService=A,this.http=y,this.toastr=R,this.cf=S,this.spinner=B,this.routeService=w,this.destroy$=new f.x,this.imgFormData=new FormData,this.groups$=this.groupService.groups$,this.limit=6,this.searchValu="",this.groupForm=this.formBuilder.group({name:new i.NI("",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(7)]),description:new i.NI("",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(100)]),file:new i.NI("")}),this.page=1,this._isLoading=!1,this.routeService.clubName$.pipe((0,m.x)(),(0,c.R)(this.destroy$)).subscribe(N=>{this.clubName=N,this.getGroup()})}getGroup(){this._isLoading||(this.groupService.getAllGroupsByClub(this.clubName,this.page,this.limit,this.searchValu),setTimeout(()=>{this.spinner.hide()},500))}addGroup(){const p=document.getElementById("group-img");E.YM(p,{canvasWidth:186,canvasHeight:162,width:186,height:162,quality:1,pixelRatio:1,skipAutoScale:!1}).then(l=>{this.groupForm.patchValue({file:this.mediaService.dataURLtoFile(l,this.groupForm.controls.name.value+".png")}),this.imgFormData.append("file",this.groupForm.get("file").value),this.mediaService.uploadMedia("group",this.imgFormData).pipe((0,n.q)(1),(0,a.z)(O=>{var P;if(O.hasErrors())return(0,D.of)(null);{const A={name:this.groupForm.controls.name.value,description:this.groupForm.controls.description.value,appPackageId:null===(P=this.authService.loggedInUser)||void 0===P?void 0:P.appPackageId,coverImageUrl:O.data.url};return this.groupService.addGroups(A)}})).subscribe(O=>{var P,A;null!==O?(this.spinner.show(),this.cf.detectChanges(),this.close(),this.toastr.success("New group successfully added.","Success!"),this.getGroup()):this.toastr.warning(null===(A=null===(P=O.errors[0])||void 0===P?void 0:P.error)||void 0===A?void 0:A.message,"Error!")})}).catch(l=>{this.toastr.warning(l,"Error!")})}close(){this.customDialogService.closeDialogs()}}return g.\u0275fac=function(p){return new(p||g)(t.Y36(e.e),t.Y36(s.W),t.Y36(i.qu),t.Y36(r.l),t.Y36(d.y),t.Y36(h.eN),t.Y36(u._W),t.Y36(t.sBO),t.Y36(_.t2),t.Y36(M.M))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-create-group"]],decls:27,vars:7,consts:[[1,"group-model"],[1,"flex","justify-end"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],[2,"position","absolute","right","0","top","0"],["id","group-img",2,"position","relative","top","0","width","182px","text-align","center","right","0","height","162px","overflow","hidden"],[2,"background-color","#D99F3A","transform","rotate(41.3deg)","top","21%","width","300px","position","absolute","right","-50%","height","52px","font-weight","400","font-size","32px"],[1,"group-form",3,"formGroup"],["for","name"],["type","text","formControlName","name","maxlength","7"],["class","error-msg error",4,"ngIf"],["for","description",1,"floating-label"],["type","text","formControlName","description"],[1,"icon","description-hide-icon"],[1,"primary-btn",3,"disabled","click"],[1,"error-msg","error"]],template:function(p,l){1&p&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return l.close()}),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4),t.qZA(),t.qZA(),t.qZA(),t.kcU(),t.TgZ(5,"h1"),t.TgZ(6,"span"),t._uU(7,"Cre"),t.qZA(),t._uU(8,"ate Group"),t.qZA(),t.TgZ(9,"div",5),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t._uU(12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"form",8),t.TgZ(14,"label",9),t._uU(15,"Name"),t.qZA(),t._UZ(16,"input",10),t.YNc(17,F,2,0,"p",11),t.YNc(18,T,2,1,"p",11),t.TgZ(19,"label",12),t._uU(20,"Description"),t.qZA(),t._UZ(21,"textarea",13),t._UZ(22,"span",14),t.YNc(23,L,2,0,"p",11),t.YNc(24,G,2,1,"p",11),t.TgZ(25,"button",15),t.NdJ("click",function(){return l.addGroup()}),t._uU(26," Add Group "),t.qZA(),t.qZA(),t.qZA()),2&p&&(t.xp6(12),t.hij(" ",l.groupForm.controls.name.value," "),t.xp6(1),t.Q6J("formGroup",l.groupForm),t.xp6(4),t.Q6J("ngIf",l.groupForm.controls.name.touched&&(null==l.groupForm.controls.name.errors?null:l.groupForm.controls.name.errors.required)),t.xp6(1),t.Q6J("ngIf",l.groupForm.controls.name.touched&&(null==l.groupForm.controls.name.errors?null:l.groupForm.controls.name.errors.minlength)),t.xp6(5),t.Q6J("ngIf",l.groupForm.controls.description.touched&&(null==l.groupForm.controls.description.errors?null:l.groupForm.controls.description.errors.required)),t.xp6(1),t.Q6J("ngIf",l.groupForm.controls.name.touched&&(null==l.groupForm.controls.description.errors?null:l.groupForm.controls.description.errors.minlength)),t.xp6(1),t.Q6J("disabled",!l.groupForm.valid))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.nD,C.O5],styles:[".create-group-dialog-overlay{height:auto;min-height:584px;max-width:580px!important}.group-model[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-left:0;padding-right:0}@media (min-width: 640px){.group-model[_ngcontent-%COMP%]{padding-left:4rem;padding-right:4rem}}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:0px;right:0px;z-index:10;margin:.875rem;border-radius:9999px;--tw-bg-opacity: 1;background-color:rgba(255,255,255,var(--tw-bg-opacity));opacity:.5}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{opacity:.7}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{padding:1px}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#132356}.group-model[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:1.5rem;object-fit:scale-down}@media (min-width: 640px){.group-model[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:1.5rem}}@media (min-width: 768px){.group-model[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:3rem}}.group-model[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:410px;height:90px}.group-model[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem;align-self:flex-start;font-size:1.875rem;line-height:2.25rem;font-weight:400}.group-model[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-bottom:4px;border-bottom:2px solid #75F16D}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem;font-size:1.125rem;line-height:1.75rem}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:3.5rem;padding-left:1.25rem;padding-right:1.25rem}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:1.25rem;height:156px}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem;height:2.75rem;width:10rem;align-self:center}"]}),g})(),Z=(()=>{class g{static getCreateGroupComponent(){return b}}return g.\u0275fac=function(p){return new(p||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[[C.ez,i.u5,i.UX,v.PW,u.Rh.forRoot({positionClass:"toast-top-right"})]]}),g})()}}]);
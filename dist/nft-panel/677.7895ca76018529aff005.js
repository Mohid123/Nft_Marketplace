"use strict";(self.webpackChunknft_panel=self.webpackChunknft_panel||[]).push([[677],{4515:(T,N,s)=>{s.d(N,{S:()=>P});class P{}},1659:(T,N,s)=>{s.d(N,{l:()=>g});var P=s(5094),M=s(4294),L=s(9922),O=s(2340),U=s(2352),u=s(7716),I=s(1841),E=s(9344);let g=(()=>{class f extends U.s{constructor(l,o){super(l),this.http=l,this.toastrService=o,this._isLoading$=new P.X(!1),this.isLoading$=this._isLoading$.asObservable(),this._totalCount$=new P.X(0),this.totalCount$=this._totalCount$.asObservable(),this._groups$=new P.X([]),this.groups$=this._groups$.asObservable(),this.limit=O.N.limit}getAllGroupsByClub(l,o,n){this._isLoading$.next(!0),o--,this.limit=n.limit;const c={clubName:l,offset:o?(this.limit||O.N.limit)*o:0,limit:this.limit||O.N.limit};n.filterItemCount&&(c.itemsCount=n.filterItemCount),n.filterName&&(c.Name=n.filterName.toString()),n.searchValue&&(c.name=n.searchValue),this.get("/group/getAllGroupsByAppPackageId",c).pipe((0,M.q)(1),(0,L.b)(d=>{var m,C,a;this._isLoading$.next(!1),d.hasErrors()?this.toastrService.error(null===(a=null===(C=null==d?void 0:d.errors[0])||void 0===C?void 0:C.error)||void 0===a?void 0:a.message):(this._totalCount$.next(d.data.totalCount),this._groups$.next(null===(m=d.data)||void 0===m?void 0:m.data))})).subscribe()}getUsersGroups(l,o,n,c){return this.limit=c,this.get("/group/getUsersGroupsByAppPackageId/"+o,{clubName:l,offset:n?(this.limit||O.N.limit)*n:0,limit:this.limit||O.N.limit}).pipe((0,M.q)(1),(0,L.b)(m=>{var C,a;m.hasErrors()&&this.toastrService.error(null===(a=null===(C=null==m?void 0:m.errors[0])||void 0===C?void 0:C.error)||void 0===a?void 0:a.message)}))}addGroups(l){return this.post("/group/addGroup",l).pipe((0,L.b)(o=>{if(!o.hasErrors()&&(this._totalCount$.next(this._totalCount$.getValue()+1),this._groups$.getValue().length<this.limit)){const n=this._groups$.getValue();this._groups$.next([o.data,...n])}}))}deleteGroups(l){return this.get(`/group/deleteGroupById/${l}`).pipe((0,M.q)(1),(0,L.b)(o=>{var n,c;o.hasErrors()&&this.toastrService.error(null===(c=null===(n=null==o?void 0:o.errors[0])||void 0===n?void 0:n.error)||void 0===c?void 0:c.message)}))}}return f.\u0275fac=function(l){return new(l||f)(u.LFG(I.eN),u.LFG(E._W))},f.\u0275prov=u.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},6658:(T,N,s)=>{s.d(N,{y:()=>E});var P=s(8583),M=s(4294),L=s(9922),O=s(2352),U=s(7716),u=s(1841),I=s(9344);let E=(()=>{class g extends O.s{constructor(p,l,o){super(l),this.document=p,this.http=l,this.toastrService=o,this.maxWidth=538,this.maxHeight=529}uploadMedia(p,l){return this.postMedia(`/media-upload/mediaFiles/${p}`,l).pipe((0,M.q)(1),(0,L.b)(o=>{var n,c;o.hasErrors()&&this.toastrService.error(null===(c=null===(n=null==o?void 0:o.errors[0])||void 0===n?void 0:n.error)||void 0===c?void 0:c.message)}))}convertToImg(p,l){return new Promise(o=>{const n=document.createElement("canvas"),c=n.getContext("2d"),d=new Image;d.src=p,d.onload=()=>{n.width=72,n.height=64,c.drawImage(d,0,0,d.width,d.height,0,0,72,64),o(this.dataURLtoFile(n.toDataURL(),l))}})}dataURLtoFile(p,l){const o=p.split(","),n=o[0].match(/:(.*?);/)[1],c=atob(o[1]);let d=c.length;const m=new Uint8Array(d);for(;d--;)m[d]=c.charCodeAt(d);return new File([m],l,{type:n})}compressImage(p){return new Promise((l,o)=>{const n=document.createElement("canvas"),c=n.getContext("2d"),d=new Image;d.src=URL.createObjectURL(p),d.onload=()=>{const m=this.calculateAspectRatioFit(null==d?void 0:d.width,null==d?void 0:d.height);n.width=m.width,n.height=m.height,c.drawImage(d,0,0,d.width,d.height,0,0,m.width,m.height),l(this.dataURLtoFile(n.toDataURL(),"thumbnail.jpg"))}})}calculateAspectRatioFit(p,l){const o=Math.min(this.maxWidth/p,this.maxHeight/l);return{width:p*o,height:l*o}}generateThumbnail(p,l){const o=this.document.createElement("video"),n=this.document.createElement("canvas"),c=document.createElement("canvas"),d=n.getContext("2d"),m=c.getContext("2d");return new Promise((C,a)=>{n.addEventListener("error",a),o.addEventListener("error",a),o.addEventListener("loadedmetadata",()=>{o.currentTime=Math.round(o.duration/2),d.drawImage(o,0,0,o.videoWidth,o.videoHeight)}),o.addEventListener("canplay",r=>{n.width=o.videoWidth,n.height=o.videoHeight,n.getContext("2d").drawImage(o,0,0,o.videoWidth,o.videoHeight);var e=new Image;e.src=n.toDataURL(),e.onload=()=>{let t=this.calculateAspectRatioFit(null==e?void 0:e.width,null==e?void 0:e.height);c.width=t.width,c.height=t.height,m.drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),C(this.dataURLtoFile(c.toDataURL(),l+".jpg"))}}),p.type&&o.setAttribute("type",p.type),o.preload="auto",o.src=window.URL.createObjectURL(p),o.load()})}}return g.\u0275fac=function(p){return new(p||g)(U.LFG(P.K0),U.LFG(u.eN),U.LFG(I._W))},g.\u0275prov=U.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},5761:(T,N,s)=>{s.d(N,{_:()=>d});var P=s(4515),M=s(2340),L=s(5094),O=s(1598),U=s(1964),u=s(4294),I=s(7580),E=s(9922),g=s(2352),f=s(7716),p=s(6989),l=s(1841),o=s(6658),n=s(9344),c=s(9866);let d=(()=>{class m extends g.s{constructor(a,r,e,t,i){super(r),this.customDialogService=a,this.http=r,this.mediaService=e,this.toastrService=t,this.spinner=i,this._cardCreatedSuccess$=new L.X(null),this.cardCreatedSuccess$=this._cardCreatedSuccess$.asObservable(),this._nftList=new L.X({totalCount:0,data:[]}),this.createNFTImg=new FormData,this.createNFTthumbnailImg=new FormData,this.createNFT=new P.S,this.nftList$=this._nftList.asObservable()}requestCreateNFT(a,r,e){this.spinner.show("main");const t=[];t.push(this.mediaService.uploadMedia("nft",r)),"Video"==a.mediaType&&t.push(this.mediaService.uploadMedia("nft-thumbnail",e)),(0,O.a)(t).pipe((0,u.q)(1),(0,I.z)(i=>i[0].hasErrors()?(0,U.of)(null):(console.log("res:",i),i[0]&&i[1]&&!i[1].hasErrors()&&(a.videoThumbnailUrl=i[1].data.url,console.log("res:",a.videoThumbnailUrl)),a.serverCaptureFileUrl=i[0].data.url,a.path=i[0].data.path,this.addNft(a)))).subscribe(i=>{var v,_;null==i?this.toastrService.warning(null===(_=null===(v=null==i?void 0:i.errors[0])||void 0===v?void 0:v.error)||void 0===_?void 0:_.message,"Error!"):this.customDialogService.closeDialogs(),this.spinner.hide("main")}),setTimeout(()=>{this.customDialogService.closeDialogs()},3e3)}getAllNftsByClub(a,r,e,t,i,v){const _={clubName:a,offset:--r?e*r:0,limit:e,name:t,type:v};return i&&(_.groupID=i),this.get("/nft/getAllNftsByClub",_).pipe((0,u.q)(1),(0,E.b)(h=>{var D,S;h.hasErrors()&&this.toastrService.error(null===(S=null===(D=null==h?void 0:h.errors[0])||void 0===D?void 0:D.error)||void 0===S?void 0:S.message)}))}getRecentSoldNfts(a,r,e,t,i){const v={clubName:a,offset:--r?e*r:0,limit:e};return i&&(v.type=i),t&&(v.groupID=t),this.get("/nft/getRecentSoldNfts",v).pipe((0,u.q)(1),(0,E.b)(_=>{var h,D;_.hasErrors()&&this.toastrService.error(null===(D=null===(h=null==_?void 0:_.errors[0])||void 0===h?void 0:h.error)||void 0===D?void 0:D.message)}))}getPendingForSaleNfts(a,r,e,t){const i={clubName:a,offset:--r?e*r:0,limit:e};return t.nftStatus&&(i.nftStatus=t.nftStatus),t.price&&(i.price=t.price),t.tokenId&&(i.tokenId=t.tokenId),this.get("/nft/getPendingForSaleNfts",i).pipe((0,u.q)(1),(0,E.b)(v=>{var _,h;v.hasErrors()&&this.toastrService.error(null===(h=null===(_=null==v?void 0:v.errors[0])||void 0===_?void 0:_.error)||void 0===h?void 0:h.message)}))}getAllNftsByUser(a,r,e,t,i,v){const _={clubName:a,offset:--e?M.N.limit*e:0,limit:M.N.limit,name:t,type:v};return i&&(_.groupID=i),this.get("/nft/getUserNftsByClub/"+r,_).pipe((0,u.q)(1),(0,E.b)(h=>{var D,S;h.hasErrors()&&this.toastrService.error(null===(S=null===(D=null==h?void 0:h.errors[0])||void 0===D?void 0:D.error)||void 0===S?void 0:S.message)}))}getAllNftsAdminPanel(a,r,e,t){const i={clubName:a,offset:--r?M.N.limit*r:0,limit:M.N.limit,name:e};return t.nftStatus&&(i.nftStatus=t.nftStatus),t.price&&(i.price=t.price),t.tokenId&&(i.tokenId=t.tokenId),t.type&&(i.type=t.type),this.get("/nft/getNftsByAppPackageIdForAdminPanel",i).pipe((0,u.q)(1),(0,E.b)(v=>{var _,h;v.hasErrors()&&this.toastrService.error(null===(h=null===(_=null==v?void 0:v.errors[0])||void 0===_?void 0:_.error)||void 0===h?void 0:h.message)}))}getNft(a){return this.get("/nft/getNft/"+a).pipe((0,u.q)(1),(0,E.b)(e=>{var t,i;e.hasErrors()&&this.toastrService.error(null===(i=null===(t=null==e?void 0:e.errors[0])||void 0===t?void 0:t.error)||void 0===i?void 0:i.message)}))}updateNft(a,r){return this.post("/nft/updateNft/"+a,{nftStatus:r}).pipe((0,u.q)(1),(0,E.b)(t=>{var i,v;t.hasErrors()&&this.toastrService.error(null===(v=null===(i=null==t?void 0:t.errors[0])||void 0===i?void 0:i.error)||void 0===v?void 0:v.message)}))}allUpdateNft(a,r){return this.post("/nft/updateAllNfts/",{nftStatus:a,appPackageId:r}).pipe((0,u.q)(1),(0,E.b)(t=>{var i,v;t.hasErrors()&&this.toastrService.error(null===(v=null===(i=null==t?void 0:t.errors[0])||void 0===i?void 0:i.error)||void 0===v?void 0:v.message)}))}batchUpdateNft(a,r,e){return this.post("/nft/updateMultipleNfts/",{nftStatus:r,nftArray:a,appPackageId:e}).pipe((0,u.q)(1),(0,E.b)(i=>{var v,_;i.hasErrors()&&this.toastrService.error(null===(_=null===(v=null==i?void 0:i.errors[0])||void 0===v?void 0:v.error)||void 0===_?void 0:_.message)}))}getEventsByNft(a){return this.get("/event/getEventByNftId/"+a).pipe((0,u.q)(1),(0,E.b)(e=>{var t,i;e.hasErrors()&&this.toastrService.error(null===(i=null===(t=null==e?void 0:e.errors[0])||void 0===t?void 0:t.error)||void 0===i?void 0:i.message)}))}getEventsByUser(a,r,e,t,i,v){const _={offset:--r?e*r:0,limit:e,eventType:v};return i&&(_.groupID=i),t&&(_.date=t),this.get("/event/getEventByUserId/"+a,_).pipe((0,u.q)(1),(0,E.b)(h=>{var D,S;h.hasErrors()&&this.toastrService.error(null===(S=null===(D=null==h?void 0:h.errors[0])||void 0===D?void 0:D.error)||void 0===S?void 0:S.message)}))}isMembershipIDExists(a){return this.post("/nft/isMembershipIDExists",a)}addNft(a){return this.post("/nft/addNft",a).pipe((0,u.q)(1),(0,E.b)(r=>{var e,t,i;r.hasErrors()?this.toastrService.error(null===(t=null===(e=null==r?void 0:r.errors[0])||void 0===e?void 0:e.error)||void 0===t?void 0:t.message):(null==r?void 0:r.data)&&(a.freezeNft&&(this.customDialogService.showLoadingDialog("Minting In Process"),setTimeout(()=>{this.customDialogService.closeDialogs()},3e3)),this._cardCreatedSuccess$.next(null===(i=null==r?void 0:r.data)||void 0===i?void 0:i.id))}))}updateNftResaleStatus(a,r,e){const t={isResaleAvailable:r};return r&&(t.price=e),this.post("/nft/updateOwnedNft/"+a,t).pipe((0,u.q)(1))}}return m.\u0275fac=function(a){return new(a||m)(f.LFG(p.W),f.LFG(l.eN),f.LFG(o.y),f.LFG(n._W),f.LFG(c.t2))},m.\u0275prov=f.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},8534:(T,N,s)=>{s.d(N,{p:()=>u});var P=s(4294),M=s(9922),L=s(2352),O=s(7716),U=s(1841);let u=(()=>{class I extends L.s{constructor(g){super(g),this.http=g}getTransactionStats(){return this.get("/token-transaction/getNdctStats").pipe((0,P.q)(1))}getBalance(){return this.get("/token-transaction/getMyBalance").pipe((0,P.q)(1),(0,M.b)(g=>{g.hasErrors()||(this.balance=g.data.balance>0?g.data.balance:0)}))}checkBalance(){return this.balance}}return I.\u0275fac=function(g){return new(g||I)(O.LFG(U.eN))},I.\u0275prov=O.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()}}]);
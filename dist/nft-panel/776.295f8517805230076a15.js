"use strict";(self.webpackChunknft_panel=self.webpackChunknft_panel||[]).push([[776],{5776:(W,u,i)=>{i.r(u),i.d(u,{CreateGroupDialogModule:()=>z});var m=i(8583),n=i(3679),d=i(6237),c=i(9344),h=i(4819),f=i(3291),F=i(6889),C=i(1598),v=i(1964),y=i(2687),Z=i(5755),x=i(4294),b=i(7580),e=i(7716),T=i(7423),M=i(7822),w=i(1659),_=i(6658),I=i(1841),O=i(9866),A=i(9309),G=i(4228);const U=["imgFile"];function P(r,g){1&r&&(e.TgZ(0,"p",31),e._uU(1,"please enter name"),e.qZA())}function N(r,g){if(1&r&&(e.TgZ(0,"p",31),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij("name should be greater than or equal to ",null==o.groupForm.controls.name.errors?null:o.groupForm.controls.name.errors.minlength.requiredLength," character ")}}function S(r,g){if(1&r&&(e.TgZ(0,"li",32),e.TgZ(1,"ul",33),e._UZ(2,"img",34),e.qZA(),e.qZA()),2&r){const o=e.oxw();e.xp6(2),e.s9C("src",o.imageSrc,e.LSH)}}function q(r,g){1&r&&(e.ynx(0),e.TgZ(1,"div",35),e._uU(2,"Select Image to Upload"),e.qZA(),e.BQk())}function D(r,g){if(1&r&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.Oqu(o.groupFile.name)}}function Y(r,g){if(1&r){const o=e.EpF();e.TgZ(0,"a",37),e.NdJ("click",function(){return e.CHM(o),e.oxw().editImg()}),e.TgZ(1,"span",38),e._uU(2,"Edit"),e.qZA(),e.O4$(),e.TgZ(3,"svg",39),e.TgZ(4,"g",40),e._UZ(5,"circle",41),e._UZ(6,"path",42),e.qZA(),e.qZA(),e.qZA()}}function k(r,g){1&r&&(e.TgZ(0,"p",31),e._uU(1,"please enter fee"),e.qZA())}function J(r,g){if(1&r&&(e.TgZ(0,"p",31),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij("fee must be greater then or equal to ",null==o.groupForm.controls.royaltyFee.errors||null==o.groupForm.controls.royaltyFee.errors.min?null:o.groupForm.controls.royaltyFee.errors.min.min," ")}}function L(r,g){if(1&r&&(e.TgZ(0,"p",31),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij("fee must be less then or equal to ",null==o.groupForm.controls.royaltyFee.errors||null==o.groupForm.controls.royaltyFee.errors.max?null:o.groupForm.controls.royaltyFee.errors.max.max," ")}}function j(r,g){1&r&&(e.TgZ(0,"p",31),e._uU(1,"please enter description"),e.qZA())}function Q(r,g){if(1&r&&(e.TgZ(0,"p",31),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij("description should be greater than or equal to ",null==o.groupForm.controls.description.errors?null:o.groupForm.controls.description.errors.minlength.requiredLength," character ")}}let E=(()=>{class r{constructor(o,t,l,a,s,p,B,R,$,H){this.authService=o,this.customDialogService=t,this.formBuilder=l,this.groupService=a,this.mediaService=s,this.http=p,this.toastr=B,this.cf=R,this.spinner=$,this.routeService=H,this.destroy$=new F.x,this.imgFormData=new FormData,this.groupimgFormData=new FormData,this.groups$=this.groupService.groups$,this.limit=6,this.groupForm=this.formBuilder.group({name:new n.NI("",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(7)]),description:new n.NI("",[n.kI.required,n.kI.minLength(15),n.kI.maxLength(600)]),royaltyFee:new n.NI("",[n.kI.required,n.kI.min(1),n.kI.max(20)]),file:new n.NI(""),groupFile:new n.NI(""),fileName:new n.NI(""),img:new n.NI("")}),this.page=1,this._isLoading=!1,this.routeService.clubName$.pipe((0,y.x)(),(0,Z.R)(this.destroy$)).subscribe(V=>{this.clubName=V,this.getGroup()})}getGroup(){this._isLoading||this.groupService.getAllGroupsByClub(this.clubName,this.page,{limit:this.limit})}onSelectFile(o){var t;if(o.target.files&&o.target.files[0]&&(this.groupFile=o.target.files[0],null===(t=this.groupForm.controls)||void 0===t||t.fileName.setValue(this.groupFile.name),o.target.files&&o.target.files[0])){const l=new FileReader;l.onload=a=>{this.cropImg(o)},l.readAsDataURL(o.target.files[0])}}cropImg(o){this.groupForm.controls.groupFile.setValue(o),this.customDialogService.showImageCropperDialog(o,1.13,!0).then(t=>{t.afterClosed().subscribe(l=>{l?(this.imageSrc=l,this.groupForm.patchValue({img:this.imageSrc})):(this.imageSrc=null,this.groupFile=null,this.groupForm.controls.img.setValue(null),this.imgFile.nativeElement.value="")})})}editImg(){this.cropImg(this.groupForm.controls.groupFile.value)}addGroup(){this.spinner.show("main");const o=document.getElementById("group-img");f.YM(o,{canvasWidth:186,canvasHeight:162,width:186,height:162,quality:1,pixelRatio:1,skipAutoScale:!1}).then(t=>{this.groupForm.patchValue({file:this.mediaService.dataURLtoFile(t,this.groupForm.controls.name.value+".png"),groupFile:this.groupFile}),this.imgFormData.append("file",this.groupForm.get("file").value),this.groupimgFormData.append("file",this.groupForm.get("groupFile").value);const l=[];l.push(this.mediaService.uploadMedia("group",this.imgFormData)),this.imageSrc&&l.push(this.mediaService.uploadMedia("group",this.groupimgFormData)),(0,C.a)(l).pipe((0,x.q)(1),(0,b.z)(a=>{var s;if(a[0].hasErrors())return(0,v.of)(null);{const p={name:this.groupForm.controls.name.value,royaltyFee:this.groupForm.controls.royaltyFee.value,description:this.groupForm.controls.description.value,appPackageId:null===(s=this.authService.loggedInUser)||void 0===s?void 0:s.appPackageId,coverImageUrl:a[0].data.url};return a[0]&&a[1]&&!a[1].hasErrors()&&(p.groupImageUrl=a[1].data.url),this.groupService.addGroups(p)}})).subscribe(a=>{var s,p;this.spinner.hide("main"),null===a||a.hasErrors()?(this.imgFormData=new FormData,this.toastr.error(null===(p=null===(s=a.errors[0])||void 0===s?void 0:s.error)||void 0===p?void 0:p.message,"Error!")):(this.cf.detectChanges(),this.toastr.success("New group successfully added.","Success!"),this.getGroup(),this.close())})}).catch(t=>{this.toastr.warning(t,"Error!")})}numberOnly(o){const t=o.which?o.which:o.keyCode;return!(t>31&&(t<48||t>57))}close(){this.customDialogService.closeDialogs()}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(T.e),e.Y36(M.W),e.Y36(n.qu),e.Y36(w.l),e.Y36(_.y),e.Y36(I.eN),e.Y36(c._W),e.Y36(e.sBO),e.Y36(O.t2),e.Y36(A.M))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-create-group"]],viewQuery:function(o,t){if(1&o&&e.Gf(U,5),2&o){let l;e.iGM(l=e.CRH())&&(t.imgFile=l.first)}},decls:50,vars:14,consts:[[1,"group-model"],[1,"flex","justify-end"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],[2,"position","absolute","right","0","top","0"],["id","group-img",2,"position","relative","top","0","width","182px","text-align","center","right","0","height","162px","overflow","hidden"],[2,"background-color","#D99F3A","transform","rotate(41.3deg)","top","21%","width","300px","position","absolute","right","-50%","height","52px","font-weight","400","font-size","32px"],[1,"group-form",3,"formGroup"],["for","name"],["appTrim","","type","text","formControlName","name","maxlength","7"],["class","error-msg error",4,"ngIf"],[1,"flex","flex-col"],["class","inline-flex justify-around my-4 card-bg",4,"ngIf"],[1,"text-xl"],[1,"relative","flex","justify-between","overflow-hidden","border-2","border-gray-400","border-dashed","rounded-lg","h-14"],[1,"flex","items-center","justify-between","px-4","py-2","font-bold","bg-primary-gray-100","hover:bg-indigo-dark"],[4,"ngIf","ngIfElse"],["show",""],["fill","#FFF","height","28","viewBox","0 0 24 24","width","28","xmlns","http://www.w3.org/2000/svg",1,"m-2"],["d","M0 0h24v24H0z","fill","none"],["d","M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"],["type","file","name","","accept","image/png, image/gif, image/jpeg",1,"absolute","block","w-full","opacity-0","cursor-pointer","pin-r","pin-t",3,"change"],["imgFile",""],["class","flex items-center justify-center w-1/3 text-center cursor-pointer",3,"click",4,"ngIf"],["for","royaltyFee"],["type","text","name","royaltyFee","formControlName","royaltyFee","maxlength","2",3,"keypress"],["for","description",1,"floating-label"],["appTrim","","type","text","formControlName","description","maxlength","600"],[1,"icon","description-hide-icon"],[1,"primary-btn",3,"disabled","click"],[1,"error-msg","error"],[1,"inline-flex","justify-around","my-4","card-bg"],[1,"border-gradient-dp-p-bg-dark","hover:border-gradient-tl-p-bg-light","gradient-border-2"],["id","ticket",1,"preview",3,"src"],[1,"ml-2","font-light","text-gray-400"],[1,"w-10","ml-2","font-light","truncate"],[1,"flex","items-center","justify-center","w-1/3","text-center","cursor-pointer",3,"click"],[1,"mr-2"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","viewBox","0 0 25 25"],["id","Group_56289","data-name","Group 56289","transform","translate(11150 -4)"],["id","Ellipse_3170","data-name","Ellipse 3170","cx","12.5","cy","12.5","r","12.5","transform","translate(-11150 4)","fill","#fff"],["id","Icon_material-edit","data-name","Icon material-edit","d","M4.5,12.486v2.1H6.6l6.2-6.2-2.1-2.1Zm9.928-5.723a.558.558,0,0,0,0-.79L13.116,4.66a.558.558,0,0,0-.79,0L11.3,5.686l2.1,2.1Z","transform","translate(-11146.5 6.504)","fill","#6a6a6a"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return t.close()}),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(5,"h1"),e.TgZ(6,"span"),e._uU(7,"Cre"),e.qZA(),e._uU(8,"ate Group"),e.qZA(),e.TgZ(9,"div",5),e.TgZ(10,"div",6),e.TgZ(11,"div",7),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"form",8),e.TgZ(14,"label",9),e._uU(15,"Name"),e.qZA(),e._UZ(16,"input",10),e.YNc(17,P,2,0,"p",11),e.YNc(18,N,2,1,"p",11),e.TgZ(19,"div",12),e.YNc(20,S,3,1,"li",13),e.TgZ(21,"span",14),e._uU(22,"Select Group Image"),e.qZA(),e._UZ(23,"br"),e.TgZ(24,"div",15),e.TgZ(25,"button",16),e.YNc(26,q,3,0,"ng-container",17),e.YNc(27,D,2,1,"ng-template",null,18,e.W1O),e.TgZ(29,"div"),e.O4$(),e.TgZ(30,"svg",19),e._UZ(31,"path",20),e._UZ(32,"path",21),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(33,"input",22,23),e.NdJ("change",function(a){return t.onSelectFile(a)}),e.qZA(),e.YNc(35,Y,7,0,"a",24),e.qZA(),e.qZA(),e.TgZ(36,"label",25),e._uU(37,"Royalty Fee (%)"),e.qZA(),e.TgZ(38,"input",26),e.NdJ("keypress",function(a){return t.numberOnly(a)}),e.qZA(),e.YNc(39,k,2,0,"p",11),e.YNc(40,J,2,1,"p",11),e.YNc(41,L,2,1,"p",11),e.TgZ(42,"label",27),e._uU(43,"Description"),e.qZA(),e._UZ(44,"textarea",28),e._UZ(45,"span",29),e.YNc(46,j,2,0,"p",11),e.YNc(47,Q,2,1,"p",11),e.TgZ(48,"button",30),e.NdJ("click",function(){return t.addGroup()}),e._uU(49," Add Group "),e.qZA(),e.qZA(),e.qZA()),2&o){const l=e.MAs(28);e.xp6(12),e.hij(" ",t.groupForm.controls.name.value," "),e.xp6(1),e.Q6J("formGroup",t.groupForm),e.xp6(4),e.Q6J("ngIf",t.groupForm.controls.name.touched&&(null==t.groupForm.controls.name.errors?null:t.groupForm.controls.name.errors.required)),e.xp6(1),e.Q6J("ngIf",t.groupForm.controls.name.touched&&(null==t.groupForm.controls.name.errors?null:t.groupForm.controls.name.errors.minlength)),e.xp6(2),e.Q6J("ngIf",t.imageSrc),e.xp6(6),e.Q6J("ngIf",!t.imageSrc)("ngIfElse",l),e.xp6(9),e.Q6J("ngIf",t.imageSrc),e.xp6(4),e.Q6J("ngIf",t.groupForm.controls.royaltyFee.touched&&(null==t.groupForm.controls.royaltyFee.errors?null:t.groupForm.controls.royaltyFee.errors.required)),e.xp6(1),e.Q6J("ngIf",t.groupForm.controls.royaltyFee.touched&&(null==t.groupForm.controls.royaltyFee.errors?null:t.groupForm.controls.royaltyFee.errors.min)),e.xp6(1),e.Q6J("ngIf",t.groupForm.controls.royaltyFee.touched&&(null==t.groupForm.controls.royaltyFee.errors?null:t.groupForm.controls.royaltyFee.errors.max)),e.xp6(5),e.Q6J("ngIf",t.groupForm.controls.description.touched&&(null==t.groupForm.controls.description.errors?null:t.groupForm.controls.description.errors.required)),e.xp6(1),e.Q6J("ngIf",t.groupForm.controls.name.touched&&(null==t.groupForm.controls.description.errors?null:t.groupForm.controls.description.errors.minlength)),e.xp6(1),e.Q6J("disabled",!t.groupForm.valid)}},directives:[n._Y,n.JL,n.sg,n.Fj,G.$,n.JJ,n.u,n.nD,m.O5],styles:[".create-group-dialog-overlay{height:auto;min-height:584px;max-width:580px!important}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.preview[_ngcontent-%COMP%]{height:6rem;width:6rem;object-fit:cover}.group-model[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-left:0;padding-right:0}@media (min-width: 640px){.group-model[_ngcontent-%COMP%]{padding-left:4rem;padding-right:4rem}}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:0px;right:0px;z-index:10;margin:.875rem;border-radius:9999px;--tw-bg-opacity: 1;background-color:rgba(255,255,255,var(--tw-bg-opacity));opacity:.5}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{opacity:.7}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{padding:1px}.group-model[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#132356}.group-model[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem;align-self:flex-start;font-size:1.875rem;line-height:2.25rem;font-weight:400}.group-model[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-bottom:4px;border-bottom:2px solid #75F16D}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem;font-size:1.125rem;line-height:1.75rem}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:3.5rem;padding-left:1.25rem;padding-right:1.25rem}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:1.25rem;height:156px}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem}.group-model[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem;height:2.75rem;align-self:center}"]}),r})(),z=(()=>{class r{static getCreateGroupComponent(){return E}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[m.ez,n.u5,n.UX,d.PW,h.n,c.Rh.forRoot({positionClass:"toast-top-right"})]]}),r})()}}]);
<app-admin-header [hideSearch]="true"></app-admin-header>
<div class="flex flex-col justify-start h-auto min-h-screen px-3 py-2 mb-12 sm:px-6 xl:px-8 center">
  <div class="flex items-center justify-between w-full h-12 py-px">
    <h1 class="h-auto m-0 text-2xl font-medium">Settings</h1>
  </div>
  <div class="w-full">
    <div class="w-full mt-6 groups-container">
      <div class="relative w-full overflow-x-auto" style="border-radius: 17px;">
        <ngx-spinner name="admin-market" [fullScreen]="false" [showSpinner]="isLoading" bdColor="#171830" size="medium"
          color="#fff" type="ball-scale-multiple">
          <p style="font-size: 20px; color: white">{{(creator$ | async)?.displayName}}...</p>
        </ngx-spinner>
        <div class="inline-flex m-8">
          <div class="flex" style=" width: 590px;" class="mx-2">
            <form action="" style="width: inherit;" [formGroup]="settingForm">
              <div class="flex justify-self-start">
                <div class="flex-1">
                  <span class="text-xl">Profile Picture</span><br>
                  <div class="field">
                    <button>
                      <ng-container *ngIf="!profileImage; else profileImageFileName">
                        <div class="ml-2 font-light text-gray-400">Select Profile Picture to Upload</div>
                    </ng-container>
                    <ng-template #profileImageFileName>
                      <div class="ml-2 font-light text-white">{{profileImage.name}}</div>
                    </ng-template>
                      <img src="../../../../assets/icons/Icon feather-upload.svg" class="p-4" alt="">
                    </button>
                    <input class="absolute block opacity-0 cursor-pointer pin-r pin-t " type="file" name=""
                      accept="image/*" (change)="onSelectProfile($event)"/>
                  </div>
                </div>
                <div class="border-4 rounded-md">
                  <ng-container *ngIf="!profileImage; else pImage">
                    <img class="preview" [src]="((creator$ | async)?.profileImageURL) || ''" alt="">

                </ng-container>
                <ng-template #pImage>
                  <img class="preview" src={{profileImageSrc}} alt="">
                </ng-template>

                </div>
              </div>
              <div class="flex pt-5 justify-self-start">
                <div class="flex-1">
                  <span class="text-xl">Cover Photo</span><br>
                  <div class="field">
                    <button>
                      <ng-container *ngIf="!coverImage; else coverImageFileName">
                        <div class="ml-2 font-light text-gray-400">Select Cover Picture to Upload</div>
                    </ng-container>
                    <ng-template #coverImageFileName>
                      <div class="ml-2 font-light text-white">{{coverImage.name}}</div>
                    </ng-template>
                      <img src="../../../../assets/icons/Icon feather-upload.svg" class="p-4" alt="">
                    </button>
                    <input class="absolute block opacity-0 cursor-pointer pin-r pin-t " type="file" name=""
                      accept="image/*" (change)="onSelectCover($event)"/>
                  </div>
                </div>
                <div class="border-4 rounded-md">
                  <ng-container *ngIf="!coverImage; else cImage">
                    <img class="preview" [src]="((creator$ | async)?.coverImageURL) || ''" alt="">

                </ng-container>
                <ng-template #cImage>
                  <img class="preview" src={{coverImageSrc}} alt="">
                </ng-template>
                </div>
              </div>
              <div class="flex flex-col pt-5">
                <span class="text-xl">Description</span><br>
                <div class="relative flex flex-col justify-between overflow-hidden rounded-lg">
                  <textarea  [(ngModel)]="description"  rows="10" cols="100" class="w-full h-40 p-4 font-light text-gray-300" type="textarea"
                    name="description" formControlName="description">
            </textarea>
            <p class="error-msg error" *ngIf="settingForm.controls.description.touched && settingForm.controls.description.errors?.required">please enter brief description</p>
                </div>
              </div>
              <div class="flex flex-col pt-5">
                <span class="text-xl">Stripe Key</span><br>
                <div class="relative flex flex-col justify-between overflow-hidden rounded-lg">
                  <input class="w-full h-12 font-light text-gray-300" type="text" placeholder="123456789"
                    name="key" formControlName="key">
                    <p class="error-msg error" *ngIf="settingForm.controls.key.touched && settingForm.controls.key.errors?.required">please enter key</p>
      <p class="error-msg error" *ngIf="settingForm.controls.key.touched && settingForm.controls.key.errors?.key">please enter valid key</p>
                  </div>
              </div>
              <div class="flex flex-row-reverse">
                <button class="py-2 mt-8 px-7 primary-btn" [disabled]="!settingForm.valid" (click)="saveSetting()">
                  Save Setting
                </button>
              </div>
            </form>
          </div>
          <div class="flex " style=" " class="ml-16">
            <div class="details-container" style=" ">
              <h6 class=""><span>Old De</span>tails</h6>
              <div class="top-0 left-0 realtive">
                <img *ngIf="!coverImageSrc;" class="relative top-0 left-0 object-cover w-full h-32" [src]="((creator$ | async)?.coverImageURL) || ''" alt="">
                <img *ngIf="coverImageSrc;" class="relative top-0 left-0 object-cover w-full h-32"  src={{coverImageSrc}} alt="">
                <div class="absolute " style=" top: 233px; width: 204px;"  >
                  <img *ngIf="!profileImageSrc;" class="inline object-cover w-12 h-12 ml-4 rounded-full"
                    [src]="((creator$ | async)?.profileImageURL) || ''"
                    alt="Profile image" />
                    <img *ngIf="profileImageSrc;"  src={{profileImageSrc}} class="inline object-cover w-12 h-12 ml-4 rounded-full" alt="">
                </div>
              </div>
              <div class="mt-8">
                <span class="text-md">Description</span><br>
                <p *ngIf="!description; else desc" class="mt-2 overflow-hidden text-sm text-gray-400 break-words overflow-ellipsis">
                  {{(creator$ | async)?.description }}
                </p>

                <p #desc class="mt-2 overflow-hidden text-sm text-gray-400 break-words overflow-ellipsis">{{description}}</p>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
